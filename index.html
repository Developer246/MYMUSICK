<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>MYMUSICK</title>
  <link rel="icon" href="img/Logo.png">
  <link rel="stylesheet" href="estilo.css">

    
</head>

<body>

<header>
  <div class="lgimg">
    <img src="img/Logo.png" alt="Logo MYMUSICK">
    <h1 class="title">MYMUSICK</h1>
  </div>

  <div class="ctsearch">
    <input class="search" type="search" placeholder="Busca tu M√∫sica üéµ">
  </div>

  <button class="bttlg" type="button" onclick="document.getElementById('login').showModal()">Iniciar Sesi√≥n</button>
</header>
<aside class="sidebar">
 <a href="#home"><i class="fa fa-fw fa-home"></i> Home</a>
  <a href="#services"><i class="fa fa-fw fa-wrench"></i> Services</a>
  <a href="#clients"><i class="fa fa-fw fa-user"></i> Clients</a>
  <a href="#contact"><i class="fa fa-fw fa-envelope"></i> Contact</a>
</aside>
  
<p class="intxt">¬øQu√© vas a escuchar hoy?</p>
  <div id="results"></div>
<script>
const input = document.querySelector(".search");
const results = document.getElementById("results");

input.addEventListener("keydown", async (e) => {
  if (e.key !== "Enter") return;

  const query = input.value.trim();
  if (!query) return;

  results.innerHTML = "Buscando... üé∂";

  try {
    const res = await fetch(
      "https://mymusick-backend.onrender.com/search?q=" +
      encodeURIComponent(query)
    );

    const songs = await res.json();
    renderSongs(songs);
  } catch (err) {
    results.innerHTML = "Error al buscar üò¢";
    console.error(err);
  }
});

function renderSongs(songs) {
  results.innerHTML = "";
  if (!Array.isArray(songs) || songs.length === 0) {
    results.innerHTML = "No se encontraron canciones";
    return;
  }

  songs.forEach(song => {
    const div = document.createElement("div");
    div.className = "song";

    div.innerHTML = `
      <img src="${song.thumbnail}" width="120" style="border-radius:12px"><br>
      üéµ <strong>${song}</strong><br>
      <small>${song.artist}</small>
    `;

div.onclick = () => loadSong(song.id);

results.appendChild(div);
  });
}
</script>

  <dialog id="login" closedby="any">
  <form method="dialog" class="login-form">
    <h3 class="intex">Iniciar Sesi√≥n</h3>

    <label for="email" class="labels">Mail</label>
    <input id="email" class="input-field" type="email" required placeholder="Escribe tu Email">

    <label for="pass" class="labels">Contrase√±a</label>
    <input id="pass" class="input-field" type="password" required placeholder="Tu Contrase√±a">

    <button type="submit" class="bttlg">Enviar</button>
  </form>
</dialog>
  
<footer class="player">
  <audio id="player"></audio>
  <button id="playBtn">‚ñ∂Ô∏é</button>
</footer>

  <script>
const player = document.getElementById("player");
const btn = document.getElementById("playBtn");

const player = document.getElementById("player");
const btn = document.getElementById("playBtn");

function loadSong(id) {
  player.src = `https://mymusick-backend.onrender.com/audio/${id}`;
  player.play();
  btn.textContent = "‚è∏";
}

btn.onclick = () => {
  if (player.paused) {
    player.play();
    btn.textContent = "‚è∏";
  } else {
    player.pause();
    btn.textContent = "‚ñ∂Ô∏é";
  }
};
</script>

</body>
</html>
