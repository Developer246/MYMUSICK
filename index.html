<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>MYMUSICK</title>
  <link rel="icon" href="img/Logo.png">
  <link rel="stylesheet" href="estilo.css">

    
</head>

<body>

<header>
  <div class="lgimg">
    <img src="img/Logo.png" alt="Logo MYMUSICK">
    <h1 class="title">MYMUSICK</h1>
  </div>

  <div class="ctsearch">
    <input class="search" type="search" placeholder="Busca tu MÃºsica ðŸŽµ">
  </div>

  <button class="bttlg" type="button" onclick="document.getElementById('login').showModal()">Iniciar SesiÃ³n</button>
</header>
<aside class="sidebar">
 <a href="#home"><i class="fa fa-fw fa-home"></i> Home</a>
  <a href="#services"><i class="fa fa-fw fa-wrench"></i> Services</a>
  <a href="#clients"><i class="fa fa-fw fa-user"></i> Clients</a>
  <a href="#contact"><i class="fa fa-fw fa-envelope"></i> Contact</a>
</aside>
  
<p class="intxt">Â¿QuÃ© vas a escuchar hoy?</p>
  <div id="results"></div>
<script>
const input = document.querySelector(".search");
const results = document.getElementById("results");

input.addEventListener("keydown", async (e) => {
  if (e.key !== "Enter") return;

  const query = input.value.trim();
  if (!query) return;

  results.innerHTML = "Buscando... ðŸŽ¶";

  try {
    const res = await fetch(
      "https://mymusick-backend.onrender.com/search?q=" +
      encodeURIComponent(query)
    );

const data = await res.json();
console.log(data); 
renderSongs(data.songs || data);

  } catch (err) {
    results.innerHTML = "Error al buscar ðŸ˜¢";
    console.error(err);
  }
});

function renderSongs(songs) {
  results.innerHTML = "";

  if (!songs.length) {
    results.innerHTML = "No se encontraron canciones";
    return;
  }

  songs.slice(0, 10).forEach(song => {
    const div = document.createElement("div");
    div.style.color = "white";
    div.style.padding = "10px";
    div.style.cursor = "pointer";

    div.innerHTML = `
      ðŸŽµ <strong>${song.name}</strong><br>
      <small>${song.artist?.name || "Artista desconocido"}</small>
    `;

    results.appendChild(div);
  });
}
</script>


 <dialog id="login" closedby="any">
  <form method="dialog" class="login-form">
    <h3 class="intex">Iniciar SesiÃ³n</h3>

    <label for="email" class="labels">Mail</label>
    <input id="email" class="input-field" type="email" required placeholder="Escribe tu Email">

    <label for="pass" class="labels">ContraseÃ±a</label>
    <input id="pass" class="input-field" type="password" required placeholder="Tu ContraseÃ±a">

    <button type="submit" class="bttlg">Enviar</button>
  </form>
</dialog>


<footer>
  <p style="margin:auto; color:white;">No se reproduce nada</p>
</footer>

</body>
</html>

